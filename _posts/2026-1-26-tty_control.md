---
title: Ubuntu 无桌面环境：如何通过 SSH 实时接管物理 TTY 终端？
author: "Zhao Zilong"
date: 2024-10-28
category: Linux
layout: post
---

在拥有 GUI（图形用户界面）的环境中，我们可以通过 **X11VNC** 等工具直接操作当前显示器上的内容。但在**纯 TTY 终端**（非 GUI）的环境下，如果我们想通过 SSH 远程查看或控制物理屏幕对应的 TTY，该如何操作？通过 SSH 远程控制物理屏幕其实分为“写”与“读”两个维度。

本文将介绍从“仅读取”到“完全接管”的几种实战方案。

---

## 1. 写入：单向投送很简单

在 Linux 中，万物皆文件。物理屏幕对应的 `tty1` 也是一个文件。

如果你只是想在屏幕终端中显示一些东西给其他人看，你可以直接通过 **重定向** 来实现：

```bash
# 最简单的写入方式
echo "Hello, I am Admin" > /dev/tty1

```

这种方式非常简单且直接，就像往一个开口的管道里倒水，水会直接出现在物理屏幕上。

---

## 2. 读取：为什么不能直接 cat？

虽然写入很简单，但**读取却不可以**通过简单的命令实现。

你可能会尝试执行 `sudo cat /dev/tty1`，但你会发现这根本无法读取到屏幕上已经显示的文字。这是因为 `/dev/ttyX` 作为字符设备，你 `cat` 到的只是该终端的“输入流”（即键盘敲击的内容），而不是“输出结果”（屏幕显示的画面）。

**所以，为了实现“读取”甚至“双向交互”，我们需要进阶工具：**

### A. 基础读取

通过内核设备文件直接读取显存：

Bash

```
sudo cat /dev/vcs1
```

*注：`/dev/vcs1` 对应物理机的 tty1。*

### B. 整洁读取 (推荐)

相比 `cat`，使用 `screendump` 工具会更好，它的输出格式更整洁，且**自带换行**，能还原屏幕的原貌：

Bash

```
sudo screendump 1
```

------

## 2. 读取 + 写入：使用 Conspy 实现直接接管

如果你不仅想看，还想直接控制物理屏幕，`conspy` 是最有效的工具。它能像 VNC 一样，让你在 SSH 窗口中实时镜像控制 TTY。

### 安装与启动

Bash

```
# 安装工具
sudo apt update && sudo apt install conspy

# 接管 tty1
sudo conspy 1
```

### 操作说明

- **实时同步：** 此时你在 SSH 里的操作会实时反映在物理屏幕上。
- **退出方式：** 快速连按 **3次 `Esc` 键** 即可退出接管模式。

------

## 3. 实战场景：远程演示与多人协作

利用 `conspy` 接管终端的特性，我们可以实现一个非常巧妙的场景：**如果你想在屏幕终端中显示一些特定的内容给物理机前的人看**，可以按照以下逻辑操作：

1. **接管终端：** 在 SSH 中通过 `sudo conspy 1` 进入物理屏幕。
2. **切换用户：** 在接管状态下，进行 `visitor` 用户（或指定用户）的登录。
3. **开启会话：** 在 `visitor` 用户下开启一个 `tmux` 窗口。
4. **退出接管：** 按三下 `Esc` 退出 `conspy`。

### 这种做法的妙处：

通过上述步骤，你已经成功在物理 TTY 上预置了一个 `tmux` 环境。由于 `tmux` 具有 Session 共享的特性，你之后可以随时在 SSH 中直接通过以下命令：

Bash

```
tmux attach -t <session_name>
```

**直接操控这个开启的 tmux 窗口**。这样你就能精准控制物理屏幕上展示的内容，而不需要一直维持 `conspy` 的镜像连接，既稳定又专业。
